!customElements.get('pickup-availability')&&customElements.define('pickup-availability',class PickupAvailability extends HTMLElement{constructor(){super(),this.hasAttribute('available')||(this.errorHtml=this.querySelector('template').content.firstElementChild.cloneNode(!0),this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability(this.dataset.variantId))}fetchAvailability(t){let e=this.dataset.rootUrl;e.endsWith("/")||(e=e+"/");const i=`${e}variants/${this.dataset.variantId}/?section_id=pickup-availability`;fetch(i).then((t=>t.text())).then((t=>{const e=new DOMParser().parseFromString(t,'text/html').querySelector('.shopify-section');this.renderPreview(e)})).catch((t=>{const e=this.querySelector('button');e&&(e.removeEventListener('click',this.onClickRefreshList),this.renderError())}))}onClickRefreshList(t){this.fetchAvailability(this.dataset.variantId)}renderError(){this.innerHTML='',this.appendChild(this.errorHtml),this.querySelector('button').addEventListener('click',this.onClickRefreshList)}renderPreview(t){const e=document.querySelector('pickup-availability-drawer');if(e&&e.remove(),!t.querySelector('pickup-availability-preview'))return void(this.innerHTML="",this.removeAttribute('available'));this.innerHTML=t.querySelector('pickup-availability-preview').outerHTML,this.setAttribute('available',''),document.body.appendChild(t.querySelector('pickup-availability-drawer'));const i=this.querySelector('button');i&&i.addEventListener('click',(t=>{document.querySelector('pickup-availability-drawer').show(t.target)}))}}),!customElements.get('pickup-availability-drawer')&&customElements.define('pickup-availability-drawer',class PickupAvailabilityDrawer extends HTMLElement{constructor(){super(),this.onBodyClick=this.handleBodyClick.bind(this),this.querySelector('button').addEventListener('click',()=>{this.hide()}),this.addEventListener('keyup',(t=>{t.code.toUpperCase()==='ESCAPE'&&this.hide()}))}handleBodyClick(t){const e=t.target;e!=this&&!e.closest('pickup-availability-drawer')&&'ShowPickupAvailabilityDrawer'!=e.id&&this.hide()}hide(){this.removeAttribute('open'),document.body.removeEventListener('click',this.onBodyClick),document.body.classList.remove('overflow-hidden'),removeTrapFocus(this.focusElement)}show(t){this.focusElement=t,this.setAttribute('open',''),document.body.addEventListener('click',this.onBodyClick),document.body.classList.add('overflow-hidden'),trapFocus(this)}})});
